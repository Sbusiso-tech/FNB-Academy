<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Request API Key | IT Varsity</title>
    <link rel="stylesheet" href="css/api-key.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
</head>
<body class="auth-page">
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <img
                  src="https://itvarsity.org/wp-content/uploads/2020/04/ITv-Logo.png"
                  alt="IT Varsity Logo"
                  class="logo"
                />
                <h1>Request API Key</h1>
                <p>Please fill out this form to request access to the Contact Book API</p>
            </div>

            <form id="requestForm" class="auth-form" aria-label="Request API Key Form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name*</label>
                        <input
                          type="text"
                          id="firstName"
                          name="firstName"
                          required
                          aria-required="true"
                        />
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name*</label>
                        <input
                          type="text"
                          id="lastName"
                          name="lastName"
                          required
                          aria-required="true"
                        />
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email Address*</label>
                    <div class="input-with-icon">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="email" name="email" required aria-required="true" />
                    </div>
                </div>

                <div class="form-group">
                    <label for="institution">Institution/Organization*</label>
                    <input
                      type="text"
                      id="institution"
                      name="institution"
                      required
                      aria-required="true"
                    />
                </div>

                <div class="form-group">
                    <label for="purpose">Purpose of API Use*</label>
                    <select id="purpose" name="purpose" required aria-required="true">
                        <option value="">Select a purpose</option>
                        <option value="education">Educational purposes</option>
                        <option value="development">Application development</option>
                        <option value="research">Research project</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group" id="otherPurposeContainer" style="display: none;">
                    <label for="otherPurpose">Please specify*</label>
                    <input type="text" id="otherPurpose" name="otherPurpose" />
                </div>

                <div class="form-group">
                    <label for="projectDetails">Project Details*</label>
                    <textarea
                      id="projectDetails"
                      name="projectDetails"
                      rows="4"
                      required
                      aria-required="true"
                    ></textarea>
                    <small>Please describe how you plan to use the API (min. 50 characters)</small>
                </div>

                <div class="form-group">
                    <label class="checkbox-container">
                        <input type="checkbox" id="terms" name="terms" required aria-required="true" />
                        <span class="checkmark"></span>
                        I agree to the <a href="#" id="termsLink">Terms of Service</a> and <a href="#" id="privacyLink">Privacy Policy</a>*
                    </label>
                </div>

                <div class="form-actions">
                    <button type="submit" id="submitRequest" class="btn btn-primary btn-block">
                        <i class="fas fa-paper-plane"></i> Submit Request
                    </button>
                </div>
            </form>

            <div id="loading" class="loading-spinner" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i> Processing your request...
            </div>
        </div>

        <div
          id="successModal"
          class="modal"
          role="dialog"
          aria-modal="true"
          aria-labelledby="successModalTitle"
          tabindex="0"
        >
            <div class="modal-content">
                <div class="modal-icon success">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 id="successModalTitle">Request Submitted Successfully!</h3>
                <p>
                  Thank you for your API key request. Our team will review your
                  application and respond within 2-3 business days.
                </p>
                <div class="modal-actions">
                    <button id="closeSuccess" class="btn btn-primary">Close</button>
                </div>
            </div>
        </div>

        <div
          id="termsModal"
          class="modal"
          role="dialog"
          aria-modal="true"
          aria-labelledby="termsModalTitle"
          tabindex="0"
        >
            <div class="modal-content">
                <h3 id="termsModalTitle">Terms of Service</h3>
                <div class="modal-body">
                    <p><strong>Last Updated: January 2024</strong></p>
                    <p>By using the IT Varsity Contact Book API, you agree to the following terms:</p>
                    <ol>
                        <li>The API is provided for educational and non-commercial use only</li>
                        <li>You will not use the API to store sensitive personal information</li>
                        <li>You will not attempt to reverse engineer or compromise the API</li>
                        <li>IT Varsity reserves the right to revoke API access at any time</li>
                        <li>You are responsible for maintaining the security of your API key</li>
                    </ol>
                </div>
                <div class="modal-actions">
                    <button id="closeTerms" class="btn btn-secondary">Close</button>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Popup modal styles */
        #notificationModal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
        }
        #notificationModal .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        #notificationModal .modal-content h3 {
            margin-bottom: 15px;
        }
        #notificationModal .modal-content button {
            padding: 10px 20px;
            background-color: #007bff;
            border: none;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        #notificationModal .modal-content button:hover {
            background-color: #0056b3;
        }
    </style>

    <div id="notificationModal">
        <div class="modal-content">
            <h3>Request Submitted Successfully!</h3>
            <p>Your API key request has been submitted successfully. Please check your email for the API key and further instructions.</p>
            <button id="notificationOkBtn">OK</button>
        </div>
    </div>

    <script>
        function submitRequestFeedback() {
            const modal = document.getElementById('notificationModal');
            modal.style.display = 'block';

            const okBtn = document.getElementById('notificationOkBtn');
            okBtn.onclick = function () {
                modal.style.display = 'none';
                window.location.href = 'enter-api-key.html';
            };
        }

        // Add event listener to form submit to show pop-up feedback
        document.getElementById('requestForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent actual form submission
            submitRequestFeedback();
        });
    </script>
</body>
</html>